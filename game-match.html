<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”Ÿè‚–æ¶ˆæ¶ˆä¹ - é©¬å¹´æ–°æ˜¥å°æ¸¸æˆ</title>
    <style>
        /* å…¨å±€æ ·å¼é‡ç½® */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Microsoft YaHei", sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5eedc 0%, #f8f5f0 100%);
            min-height: 100vh;
            padding: 20px;
        }

        /* å¤´éƒ¨æ ·å¼ */
        .game-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .game-title {
            font-size: clamp(24px, 5vw, 36px);
            color: #e67e22;
            margin-bottom: 10px;
        }

        .back-btn {
            display: inline-block;
            padding: 8px 20px;
            background: linear-gradient(90deg, #e67e22, #d35400);
            color: #fff;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            margin-bottom: 15px;
        }

        /* æ¸¸æˆå®¹å™¨ */
        .game-container {
            max-width: 800px;
            margin: 0 auto;
            background-color: #fff;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
        }

        /* åˆ†æ•°æ˜¾ç¤º */
        .game-score {
            font-size: 20px;
            color: #e67e22;
            font-weight: 600;
            text-align: center;
            margin-bottom: 15px;
            background-color: #f5eedc;
            padding: 10px;
            border-radius: 10px;
        }

        /* æ¸¸æˆåŒºåŸŸ */
        .game-area {
            width: 100%;
            min-height: clamp(300px, 70vw, 500px);
            background-color: #f8f5f0;
            border-radius: 10px;
            margin-bottom: 20px;
            padding: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* æ¶ˆæ¶ˆä¹ç½‘æ ¼ - å›ºå®š4åˆ—é€‚é…å…¨ç«¯ */
        .match-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            width: 100%;
            height: 100%;
            max-width: 600px;
        }

        /* å¡ç‰‡æ ·å¼ - 3Dç¿»ç‰Œæ•ˆæœ */
        .match-card {
            background: linear-gradient(90deg, #e67e22, #d35400);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(24px, 6vw, 36px);
            color: transparent;
            cursor: pointer;
            transition: all 0.4s ease;
            transform: rotateY(0deg);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .match-card.flipped {
            background: linear-gradient(90deg, #f1c40f, #f39c12);
            color: #fff;
            transform: rotateY(180deg);
        }

        .match-card.matched {
            background: linear-gradient(90deg, #2ecc71, #27ae60);
            color: #fff;
            transform: rotateY(180deg) scale(0.96);
            pointer-events: none;
        }

        /* æ¸¸æˆæ§åˆ¶æŒ‰é’® */
        .game-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            padding: 0 10px;
        }

        .game-btn {
            padding: 12px 28px;
            background: linear-gradient(90deg, #e67e22, #d35400);
            color: #fff;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            flex: 1;
            min-width: 100px;
            transition: background 0.3s ease;
        }

        .game-btn:hover {
            background: linear-gradient(90deg, #d35400, #e67e22);
        }

        .game-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        /* å°å±é€‚é… */
        @media screen and (max-width: 480px) {
            .match-grid {
                gap: 8px;
            }
            .game-btn {
                padding: 10px 20px;
            }
        }
    </style>
</head>
<body>
    <div class="game-header">
        <a href="main.html" class="back-btn">â† è¿”å›ä¸»é¡µé¢</a>
        <h1 class="game-title">ç”Ÿè‚–æ¶ˆæ¶ˆä¹ ğŸ´</h1>
    </div>

    <div class="game-container">
        <div class="game-score" id="matchScore">å¾—åˆ†ï¼š0</div>
        
        <div class="game-area">
            <div class="match-grid" id="matchGrid"></div>
        </div>

        <div class="game-controls">
            <button class="game-btn" id="startMatchGame">å¼€å§‹</button>
            <button class="game-btn" id="pauseMatchGame" disabled>æš‚åœ</button>
            <button class="game-btn" id="resetMatchGame" disabled>é‡ç½®</button>
        </div>
    </div>

    <script>
        // åäºŒç”Ÿè‚–å›¾æ ‡æ•°æ®ï¼ˆé©¬å¹´çªå‡ºğŸ´ï¼‰
        const zodiacIcons = ['ğŸ­', 'ğŸ‚', 'ğŸ¯', 'ğŸ°', 'ğŸ²', 'ğŸ', 'ğŸ´', 'ğŸ‘', 'ğŸµ', 'ğŸ”', 'ğŸ¶', 'ğŸ·'];

        // DOMå…ƒç´ è·å–
        const matchScore = document.getElementById('matchScore');
        const matchGrid = document.getElementById('matchGrid');
        const startMatchGame = document.getElementById('startMatchGame');
        const pauseMatchGame = document.getElementById('pauseMatchGame');
        const resetMatchGame = document.getElementById('resetMatchGame');

        // æ¸¸æˆå…¨å±€çŠ¶æ€å˜é‡
        let mgGameScore = 0;
        let mgGameRunning = false;
        let mgGamePaused = false;
        let flippedCards = [];
        let matchedPairs = 0;
        let gameCards = [];

        // ç»‘å®šæ¸¸æˆæ§åˆ¶æŒ‰é’®äº‹ä»¶
        startMatchGame.addEventListener('click', function() {
            if (!mgGameRunning) {
                startMatchGameFunc();
            } else if (mgGamePaused) {
                resumeMatchGame();
            }
        });

        pauseMatchGame.addEventListener('click', pauseMatchGameFunc);
        resetMatchGame.addEventListener('click', resetMatchGameFunc);

        // å¼€å§‹æ¸¸æˆæ ¸å¿ƒé€»è¾‘
        function startMatchGameFunc() {
            mgGameRunning = true;
            mgGamePaused = false;
            mgGameScore = 0;
            matchedPairs = 0;
            flippedCards = [];
            updateMatchScore();
            generateMatchCards();

            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            startMatchGame.textContent = 'ç»§ç»­';
            pauseMatchGame.disabled = false;
            resetMatchGame.disabled = false;
        }

        // æš‚åœæ¸¸æˆæ ¸å¿ƒé€»è¾‘
        function pauseMatchGameFunc() {
            if (mgGameRunning && !mgGamePaused) {
                mgGamePaused = true;
                startMatchGame.textContent = 'ç»§ç»­';
                // å¡ç‰‡åŠé€æ˜+ç¦æ­¢ç‚¹å‡»
                gameCards.forEach(card => {
                    card.style.opacity = '0.5';
                    card.style.pointerEvents = 'none';
                });
            }
        }

        // æ¢å¤æ¸¸æˆæ ¸å¿ƒé€»è¾‘
        function resumeMatchGame() {
            mgGamePaused = false;
            startMatchGame.textContent = 'ç»§ç»­';
            // æ¢å¤å¡ç‰‡æ ·å¼+å…è®¸ç‚¹å‡»
            gameCards.forEach(card => {
                card.style.opacity = '1';
                card.style.pointerEvents = 'auto';
            });
        }

        // åœæ­¢æ¸¸æˆæ ¸å¿ƒé€»è¾‘
        function stopMatchGame() {
            mgGameRunning = false;
            mgGamePaused = false;
            mgGameScore = 0;
            matchedPairs = 0;
            flippedCards = [];
            updateMatchScore();
            matchGrid.innerHTML = '';

            // é‡ç½®æŒ‰é’®åˆå§‹çŠ¶æ€
            startMatchGame.textContent = 'å¼€å§‹';
            pauseMatchGame.disabled = true;
            resetMatchGame.disabled = true;
        }

        // é‡ç½®æ¸¸æˆæ ¸å¿ƒé€»è¾‘
        function resetMatchGameFunc() {
            stopMatchGame();
            startMatchGameFunc();
        }

        // ç”Ÿæˆæ¶ˆæ¶ˆä¹å¡ç‰‡ï¼ˆ8å¯¹=16å¼ ï¼Œéšæœºé€‰ç”Ÿè‚–ï¼‰
        function generateMatchCards() {
            matchGrid.innerHTML = '';
            gameCards = [];
            // éšæœºç­›é€‰8ä¸ªç”Ÿè‚–ï¼Œç”Ÿæˆé…å¯¹æ•°ç»„å¹¶æ‰“ä¹±é¡ºåº
            const randomZodiacs = [...zodiacIcons].sort(() => 0.5 - Math.random()).slice(0, 8);
            const pairZodiacs = [...randomZodiacs, ...randomZodiacs].sort(() => 0.5 - Math.random());

            // å¾ªç¯åˆ›å»ºå¡ç‰‡DOM
            pairZodiacs.forEach((icon, index) => {
                const card = document.createElement('div');
                card.className = 'match-card';
                card.dataset.index = index;
                card.dataset.icon = icon;
                card.textContent = icon;
                // ç»‘å®šç¿»ç‰Œäº‹ä»¶
                card.addEventListener('click', () => flipCard(card));
                matchGrid.appendChild(card);
                gameCards.push(card);
            });
        }

        // å¡ç‰‡ç¿»ç‰Œæ ¸å¿ƒé€»è¾‘ï¼ˆå«é…å¯¹æ£€æµ‹ã€è®¡åˆ†ï¼‰
        function flipCard(card) {
            // è¿‡æ»¤ä¸å¯ç¿»ç‰Œåœºæ™¯ï¼šæš‚åœ/å·²ç¿»2å¼ /å·²ç¿»/å·²é…å¯¹
            if (mgGamePaused || flippedCards.length >= 2 || card.classList.contains('flipped') || card.classList.contains('matched')) {
                return;
            }

            // æ‰§è¡Œç¿»ç‰Œ
            card.classList.add('flipped');
            flippedCards.push(card);

            // æ£€æµ‹ä¸¤å¼ å¡ç‰‡æ˜¯å¦é…å¯¹
            if (flippedCards.length === 2) {
                const [card1, card2] = flippedCards;
                // é…å¯¹æˆåŠŸ
                if (card1.dataset.icon === card2.dataset.icon) {
                    card1.classList.add('matched');
                    card2.classList.add('matched');
                    matchedPairs++;
                    mgGameScore += 20; // é…å¯¹æˆåŠŸ+20åˆ†
                    updateMatchScore();

                    // é€šå…³åˆ¤å®šï¼š8å¯¹å…¨éƒ¨é…å¯¹å®Œæˆ
                    if (matchedPairs === 8) {
                        setTimeout(() => {
                            alert(`æ­å–œä½ ï¼ç”Ÿè‚–æ¶ˆæ¶ˆä¹é€šå…³å•¦ï½\næœ€ç»ˆå¾—åˆ†ï¼š${mgGameScore}`);
                            stopMatchGame(); // é€šå…³åé‡ç½®æ¸¸æˆ
                        }, 500);
                    }
                } else {
                    // é…å¯¹å¤±è´¥ï¼Œå»¶è¿Ÿç¿»å›å¹¶æ‰£åˆ†
                    setTimeout(() => {
                        card1.classList.remove('flipped');
                        card2.classList.remove('flipped');
                        mgGameScore = Math.max(0, mgGameScore - 5); // é…å¯¹å¤±è´¥-5åˆ†ï¼Œæœ€ä½0åˆ†
                        updateMatchScore();
                    }, 800); // å»¶è¿Ÿ800msï¼Œè®©ç”¨æˆ·çœ‹æ¸…ç¿»ç‰Œç»“æœ
                }
                // æ¸…ç©ºå·²ç¿»ç‰Œæ•°ç»„ï¼Œå‡†å¤‡ä¸‹ä¸€æ¬¡ç¿»ç‰Œ
                flippedCards = [];
            }
        }

        // æ›´æ–°åˆ†æ•°æ˜¾ç¤º
        function updateMatchScore() {
            matchScore.textContent = `å¾—åˆ†ï¼š${mgGameScore}`;
        }
    </script>
</body>
</html>